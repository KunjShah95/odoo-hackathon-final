model TripCollaborator {
        id        Int      @id @default(autoincrement())
        trip      Trip     @relation(fields: [trip_id], references: [id])
        trip_id   Int
        user      User     @relation(fields: [user_id], references: [id])
        user_id   Int
        role      String   @default("editor") // editor, viewer, etc.
        invited_by Int?
        created_at DateTime @default(now())
        @@unique([trip_id, user_id])
        @@map("trip_collaborators")
}
model Expense {
        id          Int      @id @default(autoincrement())
        trip        Trip     @relation(fields: [trip_id], references: [id])
        trip_id     Int
        user        User     @relation(fields: [user_id], references: [id])
        user_id     Int
        category    String
        amount      Float
        currency    String   @default("USD")
        description String?
        date        DateTime @default(now())
        created_at  DateTime @default(now())
        @@map("expenses")
}
        generator client {
        provider = "prisma-client-js"
        }

        datasource db {
        provider = "postgresql"
        url      = env("DATABASE_URL")
        }

model User {
        id               Int       @id @default(autoincrement())
        first_name       String
        last_name        String
        email            String    @unique
        password_hash    String
        phone            String?
        city             String?
        country          String?
        photo_url        String?
        additional_info  String?
        currency_preference String? @default("USD")
        trips            Trip[]
        collaborations   TripCollaborator[]
        expenses         Expense[]
        community_posts  CommunityPost[]
        created_at       DateTime  @default(now())
        @@map("users")
}
model Trip {
        id          Int       @id @default(autoincrement())
        name        String
        description String?
        start_date  DateTime
        end_date    DateTime
        cover_photo String?
        is_public   Boolean   @default(false)
        user        User      @relation(fields: [user_id], references: [id])
        user_id     Int
        stops         Stop[]
        community_posts CommunityPost[]
        budgets       Budget[]
        shared_trips  SharedTrip[]
        expenses      Expense[]
        created_at    DateTime  @default(now())
        collaborators TripCollaborator[]
        @@map("trips")
}



model Stop {
        id           Int      @id @default(autoincrement())
        city_name    String
        country_name String
        start_date   DateTime
        end_date     DateTime
        order_index  Int?
        trip         Trip     @relation(fields: [trip_id], references: [id])
        trip_id      Int
        activities   Activity[]
        @@map("stops")
}

model Activity {
        id               Int      @id @default(autoincrement())
        name             String
        description      String?
        type             String?
        cost             Float?
        duration_minutes Int?
        image_url        String?
        stop             Stop     @relation(fields: [stop_id], references: [id])
        stop_id          Int
        @@map("activities")
}

        model CommunityPost {
        id        Int      @id @default(autoincrement())
        content   String
        created_at DateTime @default(now())
        user      User     @relation(fields: [user_id], references: [id])
        user_id   Int
        trip      Trip?    @relation(fields: [trip_id], references: [id])
        trip_id   Int?
        @@map("community_posts")
        }



model Budget {
        id            Int     @id @default(autoincrement())
        trip_id       Int
        transport_cost Float
        stay_cost      Float
        activity_cost  Float
        meal_cost      Float
        total_cost     Float
        trip           Trip    @relation(fields: [trip_id], references: [id])
        @@map("budgets")
}

model SharedTrip {
        id         Int    @id @default(autoincrement())
        trip_id    Int   @unique
        public_key String @unique
        created_at DateTime @default(now())
        trip       Trip   @relation(fields: [trip_id], references: [id])
        @@map("shared_trips")
}

model Admin {
        id       Int    @id @default(autoincrement())
        name     String
        email    String @unique
        password String
        @@map("admins")
}

        